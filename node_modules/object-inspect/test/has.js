'use strict';

const inspect = require('../');
const test = require('tape');
const mockProperty = require('mock-property');

test('when Object#hasOwnProperty is deleted', function (t) {
    t.plan(1);
    const arr = [1, , 3]; // eslint-disable-line no-sparse-arrays

    t.teardown(() => {
        mockProperty.reset();
    });

    t.teardown(() => {
        mockProperty(Array.prototype, 1, { value: 2 });
        mockProperty(Object.prototype, 'hasOwnProperty', { 'configurable': true });
    });

    mockProperty(Object.prototype, 'hasOwnProperty', { 'value': null, 'writable': true });

    t.equal(inspect(arr), '[ 1, , 3 ]');
});
