export function parse(connectionString: string): ConnectionOptions {
  const url = new URL(connectionString);

  return {
    host: url.hostname,
    password: url.password,
    user: url.username,
    port: url.port,
    database: url.pathname.slice(1),
    client_encoding: url.searchParams.get('client_encoding'),
    ssl: url.searchParams.get('ssl') || false,

    application_name: url.searchParams.get('application_name'),
    fallback_application_name: url.searchParams.get('fallback_application_name'),
    options: url.searchParams.get('options'),
  };
}

export interface ConnectionOptions {
  host: string | null
  password?: string
  user?: string
  port?: string | null
  database: string | null | undefined
  client_encoding?: string
  ssl?: boolean | string

  application_name?: string
  fallback_application_name?: string
  options?: string
}
